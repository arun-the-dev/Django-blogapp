{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="blog-container">

  {% comment %} <h1 class="blog-title">Create a New Blog</h1> {% endcomment %}

  <form method="post" enctype="multipart/form-data" class="blog-form">
    {% csrf_token %}

    <div class="form-group">
      {{ form.title.label_tag }}
      {{ form.title }}
    </div>

    <div class="form-group">
      {{ form.main_pic.label_tag }}
      {% comment %} {{form.main_pic}} {% endcomment %}
     <input type="file" id="id_main_pic" name="main_pic" style="display:none;">
      <div class="image-preview-wrapper">
        
        <img id="image-preview" src="{{form.instance.main_pic.url}}" alt="Image preview" >
        <button type="button" id="remove-image" class="remove-btn">âœ•</button>
      </div>
    </div>

    <div class="form-group">
      {{ form.content.label_tag }}
      {{ form.content }}
    </div>

    <div class="form-group">
      {{ form.category.label_tag }}
      {{ form.category }}
    </div>

    <button type="submit" class="submit-button">Update Blog</button>
  </form>

</div>

<script>
    const input = document.getElementById("id_main_pic");
    const preview = document.getElementById("image-preview");
    const removeBtn = document.getElementById("remove-image");
  
    input.addEventListener("change", function () {
      const file = this.files[0];
      if (file) {
        preview.src = URL.createObjectURL(file);
        preview.style.display = "block";
        removeBtn.style.display = "inline";
      } else {
        preview.style.display = "none";
        removeBtn.style.display = "none";
      }
    });
  
    removeBtn.addEventListener("click", function () {
      input.value = '';  // clear input
      preview.src = "#";
      preview.style.display = "none";
      removeBtn.style.display = "none";
      input.style.display = "block"
    });
  </script>
  
{% endblock %}
